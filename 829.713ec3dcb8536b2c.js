"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[829],{2829:(V,p,i)=>{i.r(p),i.d(p,{CategoryModule:()=>B});var c=i(6814),m=i(6505),e=i(5879),u=i(8230),y=i(5127),A=i(2425),I=i(2209),b=i(7963),g=i(707),D=i(5219),r=i(6223),h=i(7213),f=i(3714),C=i(4480),v=i(9515);function T(s,d){1&s&&(e.TgZ(0,"small",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"required")," "))}function N(s,d){1&s&&(e.TgZ(0,"small",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"required")," "))}function Z(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"label",11),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"span",12),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"input",13,14),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.Item.nameAr=a)}),e.qZA(),e.YNc(11,T,3,3,"small",15),e.qZA()(),e.TgZ(12,"div",9)(13,"div",10)(14,"label",16),e._uU(15),e.ALo(16,"translate"),e.TgZ(17,"span",12),e._uU(18,"*"),e.qZA()(),e.TgZ(19,"input",17,18),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.Item.nameEn=a)}),e.qZA(),e.YNc(21,N,3,3,"small",15),e.qZA()()()()}if(2&s){const t=e.oxw();e.xp6(5),e.hij("",e.lcZ(6,6,"tableHeader.nameAr")," "),e.xp6(4),e.Q6J("ngModel",t.Item.nameAr),e.xp6(2),e.Q6J("ngIf",t.submitted&&!t.Item.nameEn),e.xp6(4),e.hij("",e.lcZ(16,8,"tableHeader.nameEn")," "),e.xp6(4),e.Q6J("ngModel",t.Item.nameEn),e.xp6(2),e.Q6J("ngIf",t.submitted&&!t.Item.nameEn)}}function S(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.hideDialog())}),e.ALo(1,"translate"),e.qZA(),e.TgZ(2,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save(a.Item))}),e.ALo(3,"translate"),e.qZA()}2&s&&(e.s9C("label",e.lcZ(1,2,"cancel")),e.xp6(2),e.s9C("label",e.lcZ(3,4,"save")))}const x=function(){return{width:"80vw"}},M=[{path:"all",component:(()=>{class s{constructor(t,l,a,o,n,O){this._productService=t,this.base=l,this.alertService=a,this.categorySerive=o,this._AuthService=n,this.NavigateRoute=O,this.permissionsLoaded=!1,this.permissions=[],this.itemDialog=!1,this.submitted=!1,this.Items=[],this.Item={},this.pageNumber=1,this.pageSize=10,this.totalRecords=0,this.pageColumns=[{field:"nameAr",header:"tableHeader.nameAr"},{field:"nameEn",header:"tableHeader.nameEn"}],this.globalFilterFields=["nameAr"],this.name=""}getItems(){this.base.getAllTest("Category",this.name,this.pageNumber,this.pageSize).subscribe({next:t=>{this.Items=t.items,this.totalRecords=t.totalCount}})}getNameValue(t){this.name=t.target.value,this.getItems()}ngOnInit(){this.getItems(),this.loadPermissions(),this.loadItems({first:this.pageNumber,rows:10})}editItem(t){this.Item={...t},this.itemDialog=!0}deleteDialogMessage(t){this.Item={...t},this.confirmDeleteDialog=!0}deleteItem(t){this._productService.delete(t.id).subscribe({next:l=>{"Category deleted successfully"===l&&(this.alertService.success(l),this.getItems())},error:l=>{this.alertService.error("faild to delete Category")}}),this.hideDialog()}hideDialog(){this.confirmDeleteDialog=!1,this.itemDialog=!1}openNew(){this.Item={},this.itemDialog=!0}save(t){this.submitted=!0,t.id?this.categorySerive.update(t).subscribe({next:l=>{"Category updated successfully"===l?(this.hideDialog(),this.alertService.success("Category Updated Succefully"),this.getItems()):this.alertService.error("faild to update this item")}}):(this.categorySerive.add(t).subscribe({next:l=>{"Category added successfully"===l?(this.alertService.success("Category Addedd Succefully"),this.getItems()):this.alertService.error("faild to add category")}}),this.hideDialog())}loadItems(t){const a=t.rows;this.pageNumber=t.first/t.rows+1,this.pageSize=a,this.getItems()}hasPermission(t){return this.permissions.includes(t)}loadPermissions(){const t=localStorage.getItem("userPermissions");t?(this.permissions=JSON.parse(t),this.permissionsLoaded=!0):this._AuthService.permissions$.subscribe(l=>{this.permissions=l,this.permissionsLoaded=!0,localStorage.setItem("userPermissions",JSON.stringify(l))})}static#e=this.\u0275fac=function(l){return new(l||s)(e.Y36(u.H),e.Y36(y.b),e.Y36(A._W),e.Y36(u.H),e.Y36(I.e),e.Y36(m.F0))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-all-category"]],decls:8,vars:17,consts:[[1,"w-100"],[1,"container"],[1,"row"],["responsive","true",3,"Items","Item","canAdd","canEdit","canDelete","columns","lazy","totalRecords","confirmDeleteDialog","editItem","openDeleteDialog","deleteItem","openNew","hideDialog","onlazyload","getName"],["styleClass","p-fluid",3,"visible","header","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[1,"container-fluid"],[1,"row","my-5","pb-3"],[1,"col-md-6","mb-3"],[1,"field"],["for","arabicName"],[1,"red-color"],["type","text","pInputText","","id","arabicName","required","","autofocus","",3,"ngModel","ngModelChange"],["txtNameAr","ngModel"],["class","p-error",4,"ngIf"],["for","englishName"],["type","text","pInputText","","id","englishName","required","","autofocus","",3,"ngModel","ngModelChange"],["txtNameEn","ngModel"],[1,"p-error"],["pButton","","pRipple","","icon","pi pi-times",1,"p-button-text",3,"label","click"],["pButton","","pRipple","","icon","pi pi-check",1,"p-button-text",3,"label","click"]],template:function(l,a){1&l&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"app-reusable-table",3),e.NdJ("editItem",function(n){return a.editItem(n)})("openDeleteDialog",function(n){return a.deleteDialogMessage(n)})("deleteItem",function(n){return a.deleteItem(n)})("openNew",function(){return a.openNew()})("hideDialog",function(){return a.hideDialog()})("onlazyload",function(n){return a.loadItems(n)})("getName",function(n){return a.getNameValue(n)}),e.qZA()()()(),e.TgZ(4,"p-dialog",4),e.NdJ("visibleChange",function(n){return a.itemDialog=n}),e.ALo(5,"translate"),e.YNc(6,Z,22,10,"ng-template",5),e.YNc(7,S,4,6,"ng-template",6),e.qZA()),2&l&&(e.xp6(3),e.Q6J("Items",a.Items)("Item",a.Item)("canAdd",a.hasPermission("AddCategory"))("canEdit",a.hasPermission("UpdateCategory"))("canDelete",a.hasPermission("DeleteCategory"))("columns",a.pageColumns)("lazy",!0)("totalRecords",a.totalRecords)("confirmDeleteDialog",a.confirmDeleteDialog),e.xp6(1),e.Akn(e.DdM(16,x)),e.s9C("header",e.lcZ(5,14,"Users.header.UpdateModal")),e.Q6J("visible",a.itemDialog)("modal",!0))},dependencies:[c.O5,b.I,g.Hq,D.jx,r.Fj,r.JJ,r.Q7,r.On,h.V,f.o,C.H,v.X$],styles:["p-table{width:100%!important}\n"],encapsulation:2})}return s})(),title:"All Categories"}];let J=(()=>{class s{static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275mod=e.oAB({type:s});static#a=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(M),m.Bz]})}return s})();var _=i(6208),z=i(5389),E=i(1532),H=i(3904),U=i(2160),L=i(4819),Y=i(9502),j=i(4055),F=i(5431),P=i(4104),Q=i(6340),R=i(3259);let B=(()=>{class s{static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275mod=e.oAB({type:s});static#a=this.\u0275inj=e.cJS({imports:[c.ez,J,_.m,v.aw,g.hJ,r.u5,F.U$,g.hJ,h.S,f.j,P.EV,H.D,Y.$,Q.V,U.kW,z.fx,E._8,L.O,R.z,j.q4,C.T]})}return s})()}}]);