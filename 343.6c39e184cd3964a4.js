"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[343],{4343:(z,m,a)=>{a.r(m),a.d(m,{SlidersModule:()=>O});var c=a(6814),g=a(6505),o=a(6223),e=a(5879),h=a(9862),u=a(5127);let S=(()=>{class i{constructor(t,l){this.http=t,this.base=l,this.controller="sliders"}getHeaders(){const t=localStorage.getItem("RoziraToken");return new h.WM({Authorization:`Bearer ${t}`})}getSliders(t,l,s){const r=this.getHeaders();return this.http.get(`${this.base.baseUrl}${this.controller}?pageIndex=${l}&PageSize=${s}`,{headers:r})}update(t){return this.base.Update(this.controller,t)}add(t){const l=this.getHeaders();return this.http.post(this.base.baseUrl+this.controller,t,{responseType:"text",headers:l})}deleteSlider(t){const l=this.getHeaders();return this.http.delete(this.base.baseUrl+this.controller+`/delete/${t}`,{responseType:"text",headers:l})}static#e=this.\u0275fac=function(l){return new(l||i)(e.LFG(h.eN),e.LFG(u.b))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var I=a(2425),b=a(2209),v=a(7963),f=a(4819),C=a(5219),A=a(707),_=a(7213),p=a(9515);function D(i,d){if(1&i&&e._UZ(0,"img",22),2&i){const t=e.oxw(3);e.Q6J("src","https://roseirae.runasp.net/"+t.Item.imageUrl,e.LSH)}}function y(i,d){if(1&i&&(e.TgZ(0,"div",20),e.YNc(1,D,1,1,"img",21),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.Item.imageUrl)}}function T(i,d){1&i&&(e.TgZ(0,"small",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"required")," "))}function x(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"label",11),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"span",12),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"p-fileUpload",13),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.Item.Image=s)})("onSelect",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onImageSelect(s))}),e.YNc(10,y,2,1,"ng-template",5),e.qZA()()(),e.YNc(11,T,3,3,"small",14),e.TgZ(12,"div",15)(13,"div",16)(14,"label",17),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"input",18,19),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(-1===r.Item.displayOrder?"No order yet":r.Item.displayOrder=s)}),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(5),e.hij("",e.lcZ(6,6,"tableHeader.image")," "),e.xp6(4),e.Q6J("ngModel",t.Item.Image)("customUpload",!0),e.xp6(2),e.Q6J("ngIf",t.submitted&&!t.Item.imageUrl),e.xp6(4),e.hij("",e.lcZ(16,8,"tableHeader.displayOrder")," "),e.xp6(2),e.Q6J("ngModel",-1===t.Item.displayOrder?"No order yet":t.Item.displayOrder)}}function N(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.hideDialog())}),e.ALo(1,"translate"),e.qZA(),e.TgZ(2,"button",25),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.save(s.Item))}),e.ALo(3,"translate"),e.qZA()}2&i&&(e.s9C("label",e.lcZ(1,2,"cancel")),e.xp6(2),e.s9C("label",e.lcZ(3,4,"save")))}const Z=function(){return{width:"80vw"}},U=[{path:"all",component:(()=>{class i{constructor(t,l,s,r){this.sliderService=t,this.alertService=l,this._AuthService=s,this.base=r,this.Items=[],this.Item={},this.permissionsLoaded=!1,this.permissions=[],this.title="slider.title",this.pageNumber=1,this.pageSize=10,this.totalRecords=0,this.pageColumns=[{field:"imageUrl",header:"tableHeader.image",filterable:!0},{field:"displayOrder",header:"tableHeader.displayOrder",filterable:!0}],this.addSlider=new o.cw({Image:new o.NI(null,o.kI.required),DisplayOrder:new o.NI(null)})}getItems(){this.sliderService.getSliders("sliders",this.pageNumber,this.pageSize).subscribe({next:t=>{this.Items=t?.items,this.totalRecords=t.totalCount}})}loadItems(t){const s=t.rows;this.pageNumber=t.first/t.rows+1,this.pageSize=s,this.getItems()}ngOnInit(){this.pageNumber=1,this.getItems(),this.loadPermissions()}save(t){this.itemDialog=!0;const l=new FormData;if(t.id)l.append("Id",t.id),l.append("Image",this.selectedFile?this.selectedFile:t.imageUrl),l.append("DisplayOrder",t.displayOrder),l.forEach((s,r)=>{}),this.sliderService.update(l).subscribe({next:s=>{"Slider updated successfully"===s&&(this.getItems(),this.alertService.success(s),this.getItems())},error:s=>{this.alertService.error("faild to update slider")}});else{const s=new FormData;this.selectedFile&&s.append("Image",this.selectedFile),s.append("DisplayOrder",t.displayOrder),this.sliderService.add(s).subscribe({next:r=>{"Slider created successfully"===r&&(this.alertService.success(r),this.getItems())},error:r=>{this.alertService.error("faild to add slider")}})}this.hideDialog()}hideDialog(){this.itemDialog=!1,this.confirmDeleteDialog=!1}openNew(){this.itemDialog=!0,this.Item={}}openDeleteDialog(t){this.Item={...t},this.confirmDeleteDialog=!0}deleteItem(t){this.delete(t.id)}deleteDialogMessage(t){}editItem(t){this.Item={...t},this.itemDialog=!0}onImageSelect(t){t.files&&t.files.length>0&&(this.selectedFile=t.files[0])}delete(t){this.sliderService.deleteSlider(t).subscribe({next:l=>{"Slider removed successfully"===l&&(this.alertService.success(l),this.getItems())},error:l=>{this.alertService.error("faild to remove slider")}}),this.hideDialog()}hasPermission(t){return this.permissions.includes(t)}loadPermissions(){const t=localStorage.getItem("userPermissions");t?(this.permissions=JSON.parse(t),this.permissionsLoaded=!0):this._AuthService.permissions$.subscribe(l=>{this.permissions=l,this.permissionsLoaded=!0,localStorage.setItem("userPermissions",JSON.stringify(l))})}static#e=this.\u0275fac=function(l){return new(l||i)(e.Y36(S),e.Y36(I._W),e.Y36(b.e),e.Y36(u.b))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-all-sliders"]],decls:8,vars:17,consts:[[1,"w-100"],[1,"container"],[1,"row"],["responsive","true",3,"Items","Item","canAdd","canEdit","canDelete","columns","lazy","totalRecords","confirmDeleteDialog","editItem","openDeleteDialog","deleteItem","openNew","hideDialog","onlazyload"],["styleClass","p-fluid",3,"visible","header","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[1,"container-fluid"],[1,"row","my-5","pb-3"],[1,"col-md-12","my-3"],[1,"form-group"],["for","image",1,"my-2"],[1,"red-color"],["name","Image","id","image","accept","image/*","chooseLabel","Choose Image",3,"ngModel","customUpload","ngModelChange","onSelect"],["class","p-error",4,"ngIf"],[1,"col-md-12","mb-3"],[1,"field"],["for","englishName"],["type","text","pInputText","","id","englishName","required","","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameEn","ngModel"],[1,"p-fileupload-content"],["alt","User Image","style","max-width: 100px; margin-top: 10px;",3,"src",4,"ngIf"],["alt","User Image",2,"max-width","100px","margin-top","10px",3,"src"],[1,"p-error"],["pButton","","pRipple","","icon","pi pi-times",1,"p-button-text",3,"label","click"],["pButton","","pRipple","","icon","pi pi-check",1,"p-button-text",3,"label","click"]],template:function(l,s){1&l&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"app-reusable-table",3),e.NdJ("editItem",function(n){return s.editItem(n)})("openDeleteDialog",function(n){return s.deleteDialogMessage(n)})("deleteItem",function(n){return s.deleteItem(n)})("openNew",function(){return s.openNew()})("hideDialog",function(){return s.hideDialog()})("openDeleteDialog",function(n){return s.openDeleteDialog(n)})("onlazyload",function(n){return s.loadItems(n)}),e.qZA()()()(),e.TgZ(4,"p-dialog",4),e.NdJ("visibleChange",function(n){return s.itemDialog=n}),e.ALo(5,"translate"),e.YNc(6,x,19,10,"ng-template",5),e.YNc(7,N,4,6,"ng-template",6),e.qZA()),2&l&&(e.xp6(3),e.Q6J("Items",s.Items)("Item",s.Item)("canAdd",s.hasPermission("CreateSlider"))("canEdit",s.hasPermission("EditSlider"))("canDelete",s.hasPermission("DeleteSlider"))("columns",s.pageColumns)("lazy",!0)("totalRecords",s.totalRecords)("confirmDeleteDialog",s.confirmDeleteDialog),e.xp6(1),e.Akn(e.DdM(16,Z)),e.s9C("header",e.lcZ(5,14,"slider.title")),e.Q6J("visible",s.itemDialog)("modal",!0))},dependencies:[c.O5,o.Fj,o.JJ,o.Q7,o.On,v.I,f.p,C.jx,A.Hq,_.V,p.X$]})}return i})(),title:"All Sliders"},{path:"update",component:(()=>{class i{static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-update-slider"]],decls:2,vars:0,template:function(l,s){1&l&&(e.TgZ(0,"p"),e._uU(1,"update-slider works!"),e.qZA())}})}return i})()},{path:"add",component:(()=>{class i{static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-slider"]],decls:2,vars:0,template:function(l,s){1&l&&(e.TgZ(0,"p"),e._uU(1,"add-slider works!"),e.qZA())}})}return i})()}];let w=(()=>{class i{static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275mod=e.oAB({type:i});static#l=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(U),g.Bz]})}return i})();var M=a(6208),J=a(5431),F=a(3259);let O=(()=>{class i{static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275mod=e.oAB({type:i});static#l=this.\u0275inj=e.cJS({imports:[c.ez,w,o.u5,M.m,p.aw,o.UX,o.u5,f.O,_.S,J.U$,p.aw,F.z]})}return i})()}}]);